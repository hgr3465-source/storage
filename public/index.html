<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</title>
  <style>
    body {
      font-family: sans-serif;
      background: #f2f2f2;
      padding: 20px;
    }
    .box {
      background: white;
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 20px;
      box-shadow: 0 0 10px #ddd;
    }
  </style>
</head>
<body>

  <h1>ğŸ“¦ Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</h1>

  <div class="box">
    <h2>Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬</h2>
    <input id="pname" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬"><br><br>
    <button onclick="addProduct()">Ø¥Ø¶Ø§ÙØ©</button>
  </div>

  <div class="box">
    <h2>Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h2>
    <button onclick="loadProducts()">ØªØ­Ø¯ÙŠØ«</button>
    <ul id="products"></ul>
  </div>

<script>
async function addProduct() {
  const name = document.getElementById("pname").value;

  await fetch("/api/products", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify({name})
  });

  loadProducts();
}

async function loadProducts() {
  const res = await fetch("/api/products");
  const data = await res.json();

  document.getElementById("products").innerHTML =
    data.map(p => `<li>${p.name} â€” Ù…Ø®Ø²ÙˆÙ†: ${p.stock}</li>`).join("");
}

loadProducts();
</script>

</body>
</html>
